window.interact=function(){"use strict";function e(){}function t(e){T=e.pageX,A=e.pageY,I=e.clientX,M=e.clientY}function n(e,t){var n,i,r;return e=e||"page",t.touches?(i=(n=t.touches.length?t.touches[0]:t.changedTouches[0])[e+"X"],r=n[e+"Y"]):(i=t[e+"X"],r=t[e+"Y"]),{x:i,y:r}}function i(e){if(pe){var t=n("screen",e);return t.x+=window.scrollX,t.y+=window.scrollY,t}return n("page",e)}function r(e){return n(pe?"screen":"client",e)}function o(e){var t,n=e.touches,i=0,r=0,o=0,s=0;for(t=0;t<n.length;t++)i+=n[t].pageX/n.length,r+=n[t].pageY/n.length,o+=n[t].clientX/n.length,s+=n[t].clientY/n.length;return{pageX:i,pageY:r,clientX:o,clientY:s}}function s(e){for(var t=0,n=e.length;n>t;t++)e[t].rect=e[t].getRect()}function a(e){if(e.length){var t,n,i,r,o,s=e[0],a=[],l=[];for(r=1;r<e.length;r++){if(t=e[r],!a.length)for(n=s;n.parentNode!==O;)a.unshift(n),n=n.parentNode;if(s instanceof Y&&t instanceof _&&!(t instanceof R)){if(t===s.parentNode)continue;n=t.ownerSVGElement}else n=t;for(l=[];n.parentNode!==O;)l.unshift(n),n=n.parentNode;for(o=0;l[o]&&l[o]===a[o];)o++;var c=[l[o-1],l[o],a[o]];for(i=c[0].lastChild;i;){if(i===c[1]){s=t,a=[];break}if(i===c[2])break;i=i.previousSibling}}return{element:s,index:e.indexOf(s)}}}function l(e){if(L.length||K.length){var t,n,i=[],r=[],o=[],s=[];for(t=0;t<L.length;t++)L[t].dropCheck(e)&&(i.push(L[t]),r.push(L[t]._element));if(n=a(r),B=n?L[n.index]:null,K.length){var l=V._element;for(t=0;t<K.length;t++)for(var c=K[t],h=O.querySelectorAll(c.selector),u=0,d=h.length;d>u;u++)c._element=h[u],c.rect=c.getRect(),c._element!==l&&-1===r.indexOf(c._element)&&s.indexOf(-1===c._element)&&c.dropCheck(e)&&(o.push(c),s.push(c._element));s.length&&(B&&(o.push(B),s.push(B._element)),(n=a(s))&&(B=o[n.index]).selector&&(B._element=s[n.index]))}return B}}function c(e,t,n,s,a){var l,c,h=(V&&V.options||F).deltaSource,u=V?V.options:F;if(s=s||V._element,"gesture"===t){var d=o(e);c={x:d.pageX-u.origin.x,y:d.pageY-u.origin.y},l={x:d.clientX-u.origin.x,y:d.clientY-u.origin.y}}else if(l=r(e),(c=i(e)).x-=u.origin.x,c.y-=u.origin.y,V.options.snapEnabled){var p=u.snap;this.snap={mode:p.mode,anchors:H.anchors,range:H.range,locked:H.locked,x:H.x,y:H.y,realX:H.realX,realY:H.realY,dx:H.dx,dy:H.dy},H.locked&&("path"===p.mode?(H.xInRange&&(c.x+=H.dx,l.x+=H.dx),H.yInRange&&(c.y+=H.dy,l.y+=H.dy)):(c.x+=H.dx,c.y+=H.dy,l.x+=H.dx,l.y+=H.dy))}this.x0=C,this.y0=k,this.clientX0=D,this.clientY0=P,this.pageX=c.x,this.pageY=c.y,this.clientX=l.x,this.clientY=l.y,this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.button=e.button,this.target=s,this.timeStamp=(new Date).getTime(),this.type=t+(n||""),a&&(this.relatedTarget=a),"start"===n||"end"===n||"drop"===t?"client"===h?(this.dx=l.x-C,this.dy=l.y-k):(this.dx=c.x-C,this.dy=c.y-k):"client"===h?(this.dx=l.x-I,this.dy=l.y-M):(this.dx=c.x-T,this.dy=c.y-A),"resize"===t?u.squareResize||e.shiftKey?("y"===se?this.dx=this.dy:this.dy=this.dx,this.axes="xy"):(this.axes=se,"x"===se?this.dy=0:"y"===se&&(this.dx=0)):"gesture"===t&&(this.touches=e.touches,this.distance=function(e){var t=(V&&V.options||F).deltaSource+"X",n=e.touches[0][t],i=e.touches[0][t];return"touchend"===e.type&&1===e.touches.length?(n-=e.changedTouches[0][t],i-=e.changedTouches[0][t]):(n-=e.touches[1][t],i-=e.touches[1][t]),Math.sqrt(n*n+i*i)}(e),this.box=function(e){if(e.touches.length){var t,n=e.touches,i=e.touches[0].pageX,r=e.touches[0].pageY,o=i,s=r;for(t=1;t<n.length;t++)r=(i=i>e.touches[t].pageX?i:e.touches[t].pageX)>e.touches[t].pageX?r:e.touches[t].pageY;return{left:i,top:r,width:o-i,height:s-r}}}(e),this.angle=function(e){var t=(V&&V.options||F).deltaSource+"X",n=e.touches[0][t],i=e.touches[0][t];return"touchend"===e.type&&1===e.touches.length?(n-=e.changedTouches[0][t],i-=e.changedTouches[0][t]):(n-=e.touches[1][t],i-=e.touches[1][t]),180*-Math.atan(i/n)/Math.PI}(e),"start"===n?(this.scale=1,this.ds=0,this.rotation=0):(this.scale=this.distance/j.startDistance,"end"===n?(this.rotation=this.angle-j.startAngle,this.ds=this.scale-1):(this.rotation=this.angle-j.prevAngle,this.ds=this.scale-j.prevScale)))}function h(e,t){if("string"!=typeof e)return null;t=t||V;var n=-1!==e.indexOf("resize")?"resize":e,i=(t||V).options;return("resize"===n&&i.resizeable||"drag"===e&&i.draggable||"gesture"===e&&i.gestureable)&&le[n]?(("resize"===e||"resizeyx"===e)&&(e="resizexy"),e):null}function u(e){var t;if(!(ie||oe||ne)){if(G.length&&"mousedown"===e.type)t=m(e,G);else for(var n,i,r=e.target instanceof X?e.target.correspondingUseElement:e.target;r!==O.documentElement&&!t;){for(n in G=[],$)i=Element.prototype[ge]===S?O.querySelectorAll(n):void 0,r[ge](n,i)&&($[n]._element=r,G.push($[n]));t=m(e,G),r=r.parentNode}return t?(Z=!0,d(e,t)):void 0}}function d(e,t){if(e.touches&&e.touches.length<2&&!V||!Z){var n=xe.useAttachEvent?e.currentTarget:this;V=q.get(n)}var s=V&&V.options;if(V&&!(ie||oe||ne)){var a,l,c,u=h(t||V.getAction(e));if(e.touches?(l={x:(a=o(e)).pageX,y:a.pageY},c={x:a.clientX,y:a.clientY}):(l=i(e),c=r(e)),!u)return e;Z=!0,ee=!1,s.styleCursor&&(O.documentElement.style.cursor=ae[u].cursor),se="resizexy"===u?"xy":"resizex"===u?"x":"resizey"===u?"y":"",ce=u,C=l.x-s.origin.x,k=l.y-s.origin.y,D=c.x-s.origin.x,P=c.y-s.origin.y,H.x=null,H.y=null,e.preventDefault()}}function p(e){if(Z&&(C===T&&k===A&&(ee=!0),ce&&V))if(V.options.snapEnabled){var t,n,r,o,s,a,l,c,h,u=V.options.snap,d=i(e);if(H.realX=d.x,H.realY=d.y,d.x-=V.options.origin.x,d.y-=V.options.origin.y,u.range<0&&(u.range=1/0),"anchor"===u.mode&&u.anchors.length){for(t={anchor:null,distance:0,range:0,distX:0,distY:0},c=0,h=u.anchors.length;h>c;c++){var p=u.anchors[c];n="number"==typeof p.range?p.range:u.range,s=p.x-d.x,a=p.y-d.y,r=n>(l=Math.sqrt(s*s+a*a)),1/0===n&&t.inRange&&1/0!==t.range&&(r=!1),(!t.anchor||(r?t.inRange&&1/0!==n?l/n<t.distance/t.range:l<t.distance:!t.inRange&&l<t.distance))&&(1/0===n&&(r=!0),t.anchor=p,t.distance=l,t.range=n,t.inRange=r,t.distX=s,t.distY=a,H.range=n)}r=t.inRange,o=t.anchor.x!==H.x||t.anchor.y!==H.y,H.x=t.anchor.x,H.y=t.anchor.y,H.dx=t.distX,H.dy=t.distY,V.options.snap.anchors.closest=H.anchors.closest=t.anchor}else if("grid"===u.mode){var g=Math.round((d.x-u.gridOffset.x)/u.grid.x),f=Math.round((d.y-u.gridOffset.y)/u.grid.y),y=g*u.grid.x+u.gridOffset.x,m=f*u.grid.y+u.gridOffset.y;s=y-d.x,a=m-d.y,r=(l=Math.sqrt(s*s+a*a))<u.range,o=y!==H.x||m!==H.y,H.x=y,H.y=m,H.dx=s,H.dy=a,H.range=u.range}if("path"===u.mode&&u.paths.length){for(t={path:{},distX:0,distY:0,range:0},c=0,h=u.paths.length;h>c;c++){var v,x,b=u.paths[c],w=!1,E=!1,S=b;"function"==typeof b&&(S=b(d.x,d.y)),"number"==typeof S.x?(v=S.x,w=!0):v=d.x,"number"==typeof S.y?(x=S.y,E=!0):x=d.y,n="number"==typeof S.range?S.range:u.range,s=v-d.x,a=x-d.y;var O=Math.abs(s)<n&&w,z=Math.abs(a)<n&&E;1/0===n&&t.xInRange&&1/0!==t.range&&(O=!1),"x"in t.path&&!(O?t.xInRange&&1/0!==n?l/n<t.distX/t.range:Math.abs(s)<Math.abs(t.distX):!t.xInRange&&Math.abs(s)<Math.abs(t.distX))||(1/0===n&&(O=!0),t.path.x=v,t.distX=s,t.xInRange=O,t.range=n,H.range=n),1/0===n&&t.yInRange&&1/0!==t.range&&(z=!1),"y"in t.path&&!(z?t.yInRange&&1/0!==n?l/n<t.distY/t.range:Math.abs(a)<Math.abs(t.distY):!t.yInRange&&Math.abs(a)<Math.abs(t.distY))||(1/0===n&&(z=!0),t.path.y=x,t.distY=a,t.yInRange=z,t.range=n,H.range=n)}r=t.xInRange||t.yInRange,o=!(!t.xInRange||!t.yInRange||H.xInRange&&H.yInRange)||!t.xInRange||!t.yInRange||t.path.x!==H.x||t.path.y!==H.y,H.x=t.path.x,H.y=t.path.y,H.dx=t.distX,H.dy=t.distY,H.xInRange=t.xInRange,H.yInRange=t.yInRange,V.options.snap.paths.closest=H.paths.closest=t.path}!o&&H.locked||!r?(o||!r)&&(H.locked=!1,ae[ce].moveListener(e)):(H.locked=!0,ae[ce].moveListener(e))}else ae[ce].moveListener(e);(ie||oe)&&W.edgeMove(e)}function g(e){var n,i,r,o,a;if(e.preventDefault(),ie){var h=V._element,u=o?o._element:null;n=new c(e,"drag","move"),o=l(e),V._element=h,o!==U&&(U&&(r=new c(e,"drag","leave",u,h),n.dragLeave=U._element,a=U,U=null),o&&(i=new c(e,"drag","enter",u,h),n.dragEnter=o._element,U=o))}else if(n=new c(e,"drag","start"),ie=!0,!re){s(L);for(var d=0;d<K.length;d++)K[d]._elements=O.querySelectorAll(K[d].selector)}V.fire(n),r&&a.fire(r),i&&o.fire(i),t(n)}function f(e){var n;e.preventDefault(),oe?(n=new c(e,"resize","move"),V.fire(n)):(n=new c(e,"resize","start"),V.fire(n),oe=!0),t(n)}function y(e){var n;!e.touches||e.touches.length<2||(e.preventDefault(),ne?((n=new c(e,"gesture","move")).ds=n.scale-j.scale,V.fire(n)):((n=new c(e,"gesture","start")).ds=0,j.startDistance=n.distance,j.startAngle=n.angle,j.scale=1,V.fire(n),ne=!0),t(n),j.prevAngle=n.angle,j.prevDistance=n.distance,1/0===n.scale||null===n.scale||void 0===n.scale||isNaN(n.scale)||(j.scale=n.scale))}function m(e,t){for(var n=0,i=t.length;i>n;n++){var r=t[n],o=h(r.getAction(e,r),r);if(o)return V=r,o}}function v(e,t){var n;Z||ie||oe||ne?e.preventDefault():(t?n=m(e,t):V&&(n=h(V.getAction(e))),V&&V.options.styleCursor&&(O.documentElement.style.cursor=n?ae[n].cursor:""))}function x(e){var t;if(!(e.touches&&e.touches.length>=2)){if(ie){t=new c(e,"drag","end");var n,i=V._element,r=l(e),o=r?r._element:null;if(V._element=i,r)n=new c(e,"drop",null,o,i),t.dropzone=o;else if(U){var s=new c(e,"drag","leave",o,i);U.fire(s,i),t.dragLeave=U._element}V.fire(t),n&&B.fire(n)}else if(oe)t=new c(e,"resize","end"),V.fire(t);else if(ne)(t=new c(e,"gesture","end")).ds=t.scale,V.fire(t);else if(("mouseup"===e.type||"touchend"===e.type)&&V&&Z&&!ee){var a={};for(var h in e)e.hasOwnProperty(h)&&(a[h]=e[h]);a.type="click",V.fire(a)}return b.stop(),e}}function b(e){return q.get(e)||new E(e)}function w(e){for(var t in F)e.hasOwnProperty(t)&&typeof e[t]==typeof F[t]&&(this[t]=e[t])}function E(e,t){this._element=e,this._iEvents=this._iEvents||{},"string"==typeof e?(O.querySelector(e),$[e]=this,this.selector=e):(e instanceof Element&&(xe.add(this,"mousemove",v),xe.add(this,"mousedown",d),xe.add(this,"touchmove",v),xe.add(this,"touchstart",d)),N.push(this)),q.push(this),this.set(t)}var S,O=window.document,z=window.console,_=window.SVGElement||e,R=window.SVGSVGElement||e,X=window.SVGElementInstance||e,Y=window.HTMLElement||window.Element,T=0,A=0,I=0,M=0,C=0,k=0,D=0,P=0,j={start:{x:0,y:0},startDistance:0,prevDistance:0,distance:0,scale:1,startAngle:0,prevAngle:0},q=[],L=[],N=[],$={},K=[],G=[],V=null,B=null,U=null,F={draggable:!1,dropzone:!1,resizeable:!1,squareResize:!1,gestureable:!1,styleCursor:!0,snap:{mode:"grid",range:1/0,grid:{x:100,y:100},gridOffset:{x:0,y:0},anchors:[],paths:[],arrayTypes:/^anchors$|^paths$/,objectTypes:/^grid$|^gridOffset$/,stringTypes:/^mode$/,numberTypes:/^range$/},snapEnabled:!1,autoScroll:{container:window,margin:60,interval:20,distance:10,elementTypes:/^container$/,numberTypes:/^range$|^interval$|^distance$/},autoScrollEnabled:!1,origin:{x:0,y:0},deltaSource:"page"},H={locked:!1,x:0,y:0,dx:0,dy:0,realX:0,realY:0,anchors:[],paths:[]},W={margin:60,interval:20,i:null,distance:10,x:0,y:0,scroll:function(){var e=V.options.autoScroll.container;e===window?window.scrollBy(W.x,W.y):e&&(e.scrollLeft+=W.x,e.scrollTop+=W.y)},edgeMove:function(e){if(V&&V.options.autoScrollEnabled&&(ie||oe)){var t,n,i,r,o=V.options.autoScroll;if(o.container===window)r=e.clientX<W.margin,t=e.clientY<W.margin,n=e.clientX>window.innerWidth-W.margin,i=e.clientY>window.innerHeight-W.margin;else{var s=b(o.container).getRect();r=e.clientX<s.left+W.margin,t=e.clientY<s.top+W.margin,n=e.clientX>s.right-W.margin,i=e.clientY>s.bottom-W.margin}W.x=W.distance*(n?1:r?-1:0),W.y=W.distance*(i?1:t?-1:0),W.isScrolling||(W.margin=o.margin,W.distance=o.distance,W.interval=o.interval,W.start())}},isScrolling:!1,start:function(){W.isScrolling=!0,window.clearInterval(W.i),W.i=window.setInterval(W.scroll,W.interval)},stop:function(){window.clearInterval(W.i),W.isScrolling=!1}},J="createTouch"in O,Q=J?20:10,Z=!1,ee=!1,te=!1,ne=!1,ie=!1,re=!1,oe=!1,se="xy",ae={drag:{cursor:"move",moveListener:g},resizex:{cursor:"e-resize",moveListener:f},resizey:{cursor:"s-resize",moveListener:f},resizexy:{cursor:"se-resize",moveListener:f},gesture:{cursor:"",moveListener:y}},le={drag:!0,resize:!0,gesture:!0},ce=null,he="onmousewheel"in O?"mousewheel":"wheel",ue=["resizestart","resizemove","resizeend","dragstart","dragmove","dragend","dragenter","dragleave","drop","gesturestart","gesturemove","gestureend","click"],de={},pe="Opera"==navigator.appName&&J&&navigator.userAgent.match("Presto"),ge="matchesSelector"in Element.prototype?"matchesSelector":"webkitMatchesSelector"in Element.prototype?"webkitMatchesSelector":"mozMatchesSelector"in Element.prototype?"mozMatchesSelector":"oMatchesSelector"in Element.prototype?"oMatchesSelector":"msMatchesSelector",fe={_element:window,events:{}},ye={_element:O,events:{}},me={_element:window.parent,events:{}},ve={_element:window.parent.document,events:{}},xe=function(){function e(e,t,n,o){var c,h=l[a.indexOf(e)];if(h||(h={events:{},typeCount:0},a.push(e),l.push(h)),t in h.events||(h.events[t]=[],h.typeCount++),-1===h.events[t].indexOf(n))return c=i?e[r](s+t,(function(t){t.immediatePropagationStopped||(t.target=t.srcElement,t.currentTarget=e,/mouse|click/.test(t.type)&&(t.pageX=t.clientX+O.documentElement.scrollLeft,t.pageY=t.clientY+O.documentElement.scrollTop),n(t))}),n,o||!1):e[r](t,n,o||!1),h.events[t].push(n),c}function t(e,n,i,r){var c,h=l[a.indexOf(e)];if(h&&h.events)if("all"!==n){if(h.events[n]){var u=h.events[n].length;if("all"===i){for(c=0;u>c;c++)e[o](s+n,h.events[n][c],r||!1);h.events[n]=null,h.typeCount--}else for(c=0;u>c;c++)if(h.events[n][c]===i){e[o](s+n,h.events[n][c],r||!1),h.events[n].splice(c,1);break}h.events[n]&&0===h.events[n].length&&(h.events[n]=null,h.typeCount--)}h.typeCount||(l.splice(l.indexOf(h),1),a.splice(a.indexOf(e),1))}else for(n in h.events)h.events.hasOwnProperty(n)&&t(e,n,"all")}var n=window.Event,i="attachEvent"in window&&!("addEventListener"in window),r=i?"attachEvent":"addEventListener",o=i?"detachEvent":"removeEventListener",s=i?"on":"",a=[],l=[];return"indexOf"in Array.prototype||(Array.prototype.indexOf=function(e){var t=this.length>>>0,n=Number(arguments[1])||0;for(0>(n=0>n?Math.ceil(n):Math.floor(n))&&(n+=t);t>n;n++)if(n in this&&this[n]===e)return n;return-1}),"stopPropagation"in n.prototype||(n.prototype.stopPropagation=function(){this.cancelBubble=!0},n.prototype.stopImmediatePropagation=function(){this.cancelBubble=!0,this.immediatePropagationStopped=!0}),"preventDefault"in n.prototype||(n.prototype.preventDefault=function(){this.returnValue=!1}),"hasOwnProperty"in n.prototype||(n.prototype.hasOwnProperty=Object.prototype.hasOwnProperty),{add:function(t,n,i,r){e(t._element,n,i,r)},remove:function(e,n,i,r){t(e._element,n,i,r)},addToElement:e,removeFromElement:t,useAttachEvent:i}}();if(c.prototype={preventDefault:e,stopImmediatePropagation:function(){te=!0},stopPropagation:e},q.indexOfElement=L.indexOfElement=function(e){for(var t=0;t<this.length;t++){var n=this[t];if(n.selector===e||!n.selector&&n._element===e)return t}return-1},q.get=function(e){return"string"==typeof e?$[e]:this[this.indexOfElement(e)]},L.get=function(e){return this[this.indexOfElement(e)]},w.prototype=F,E.prototype={setOnEvents:function(e,t){var n=t.onstart||t.onStart,i=t.onmove||t.onMove,r=t.onend||t.onEnd;e="on"+e,"function"==typeof n&&(this[e+"start"]=n),"function"==typeof i&&(this[e+"move"]=i),"function"==typeof r&&(this[e+"end"]=r)},draggable:function(e){return e instanceof Object?(this.options.draggable=!0,this.setOnEvents("drag",e),this):"boolean"==typeof e?(this.options.draggable=e,this):null===e?(delete this.options.draggable,this):this.options.draggable},dropzone:function(e){if(e instanceof Object){var t=e.ondrop||e.onDrop;return"function"==typeof t&&(this.ondrop=t),this.options.dropzone=!0,(this.selector?K:L).push(this),re||this.selector||(this.rect=this.getRect()),this}if("boolean"==typeof e){if(e)(this.selector?K:L).push(this),re||this.selector||(this.rect=this.getRect());else{var n=this.selector?K:L,i=n.indexOf(this);-1!==i&&n.splice(i,1)}return this.options.dropzone=e,this}return null===e?(delete this.options.dropzone,this):this.options.dropzone},dropCheck:function(e){var t,n,r=i(e);return re&&(this.rect=this.getRect()),t=r.x>this.rect.left&&r.x<this.rect.right,n=r.y>this.rect.top&&r.y<this.rect.bottom,t&&n},dropChecker:function(e){return"function"==typeof e?(this.dropCheck=e,this):this.dropCheck},resizeable:function(e){return e instanceof Object?(this.options.resizeable=!0,this.setOnEvents("resize",e),this):"boolean"==typeof e?(this.options.resizeable=e,this):this.options.resizeable},squareResize:function(e){return"boolean"==typeof e?(this.options.squareResize=e,this):null===e?(delete this.options.squareResize,this):this.options.squareResize},gestureable:function(e){return e instanceof Object?(this.options.gestureable=!0,this.setOnEvents("gesture",e),this):"boolean"==typeof e?(this.options.gestureable=e,this):null===e?(delete this.options.gestureable,this):this.options.gestureable},autoScroll:function(e){var t=F.autoScroll;if(e instanceof Object){var n=this.options.autoScroll;return n===t&&(n=this.options.autoScroll={margin:t.margin,distance:t.distance,interval:t.interval,container:t.container}),n.margin=this.validateSetting("autoScroll","margin",e.margin),n.distance=this.validateSetting("autoScroll","distance",e.distance),n.interval=this.validateSetting("autoScroll","interval",e.interval),n.container=this.validateSetting("autoScroll","container",e.container),this.options.autoScrollEnabled=!0,this.options.autoScroll=n,this}return"boolean"==typeof e?(this.options.autoScrollEnabled=e,this):null===e?(delete this.options.autoScrollEnabled,delete this.options.autoScroll,this):!!this.options.autoScrollEnabled&&this.options.autoScroll},snap:function(e){var t=F.snap;if(e instanceof Object){var n=this.options.snap;return n===t&&(n=this.options.snap={mode:t.mode,range:t.range,grid:t.grid,gridOffset:t.gridOffset,anchors:t.anchors}),n.mode=this.validateSetting("snap","mode",e.mode),n.range=this.validateSetting("snap","range",e.range),n.paths=this.validateSetting("snap","paths",e.paths),n.grid=this.validateSetting("snap","grid",e.grid),n.gridOffset=this.validateSetting("snap","gridOffset",e.gridOffset),n.anchors=this.validateSetting("snap","anchors",e.anchors),this.options.snapEnabled=!0,this.options.snap=n,this}return"boolean"==typeof e?(this.options.snapEnabled=e,this):null===e?(delete this.options.snapEnabled,delete this.options.snap,this):!!this.options.snapEnabled&&this.options.snap},getAction:function(e){var t,n,r=this.getRect(),o=i(e),s=this.options;return le.resize&&s.resizeable&&(t=o.x>r.right-Q,n=o.y>r.bottom-Q),le.gesture&&e.touches&&e.touches.length>=2&&!ie&&!oe?"gesture":(se=(t?"x":"")+(n?"y":""))?"resize"+se:le.drag&&s.draggable?"drag":null},actionChecker:function(e){return"function"==typeof e?(this.getAction=e,this):null===e?(delete this.options.getAction,this):this.getAction},getRect:function(){var e=window.scrollX||O.documentElement.scrollLeft,t=window.scrollY||O.documentElement.scrollTop,n=this._element instanceof _?this._element.getBoundingClientRect():this._element.getClientRects()[0];return{left:n.left+e,right:n.right+e,top:n.top+t,bottom:n.bottom+t,width:n.width||n.right-n.left,height:n.heigh||n.bottom-n.top}},rectChecker:function(e){return"function"==typeof e?(this.getRect=e,this):null===e?(delete this.options.getRect,this):this.getRect},styleCursor:function(e){return"boolean"==typeof e?(this.options.styleCursor=e,this):null===e?(delete this.options.styleCursor,this):this.options.styleCursor},origin:function(e){return e instanceof Object?(this.options.origin=e,this):null===e?(delete this.options.origin,this):this.options.origin},deltaSource:function(e){return"page"===e||"client"===e?(this.options.deltaSource=e,this):null===e?(delete this.options.deltaSource,this):this.options.deltaSource},validateSetting:function(e,t,n){var i=F[e],r=this.options[e];if(void 0!==i&&void 0!==i[t]){if("objectTypes"in i&&i.objectTypes.test(t))return n instanceof Object?n:t in r&&r[t]instanceof Object?r[t]:i[t];if("arrayTypes"in i&&i.arrayTypes.test(t))return n instanceof Array?n:t in r&&r[t]instanceof Array?r[t]:i[t];if("stringTypes"in i&&i.stringTypes.test(t))return"string"==typeof n?n:t in r&&"string"==typeof r[t]?r[t]:i[t];if("numberTypes"in i&&i.numberTypes.test(t))return"number"==typeof n?n:t in r&&"number"==typeof r[t]?r[t]:i[t];if("elementTypes"in i&&i.elementTypes.test(t))return n instanceof Element?n:t in r&&r[t]instanceof Element?r[t]:i[t]}return null},element:function(){return this._element},fire:function(e){if(!e||!e.type||-1===ue.indexOf(e.type))return this;for(var t,n,i=0,r=0,o="on"+e.type;3>i;)try{switch(i){case 0:"function"==typeof this[o]&&this[o](e);break;case 1:if(e.type in this._iEvents){for(n=(t=this._iEvents[e.type]).length;n>r&&!te;r++)t[r](e);break}break;case 2:if(e.type in de&&(t=de[e.type]))for(n=(t=de[e.type]).length;n>r&&!te;r++)t[r](e)}r=0,i++}catch(t){z.error("Error thrown from "+e.type+" listener"),z.error(t),r++,0===i&&i++}return te=!1,this},on:function(e,t,n){if("wheel"===e&&(e=he),-1!==ue.indexOf(e))e in this._iEvents?-1===this._iEvents[e].indexOf(t)&&this._iEvents[e].push(t):this._iEvents[e]=[t];else if(this.selector)for(var i=O.querySelectorAll(this.selector),r=0,o=i.length;o>r;r++)xe.addToElement(i[r],e,t,n);else xe.add(this,e,t,n);return this},off:function(e,t,n){if("wheel"===e&&(e=he),-1!==ue.indexOf(e)){var i,r=this._iEvents[e];r&&-1!==(i=r.indexOf(t))&&this._iEvents[e].splice(i,1)}else if(this.selector)for(var o=O.querySelectorAll(this.selector),s=0,a=o.length;a>s;s++)xe.removeFromElement(o[s],e,t,n);else xe.remove(this._element,t,n);return this},set:function(e){return e&&"object"==typeof e||(e={}),this.options=new w(e),this.draggable("draggable"in e?e.draggable:this.options.draggable),this.dropzone("dropzone"in e?e.dropzone:this.options.dropzone),this.resizeable("resizeable"in e?e.resizeable:this.options.resizeable),this.gestureable("gestureable"in e?e.gestureable:this.options.gestureable),"autoScroll"in e&&this.autoScroll(e.autoScroll),this},unset:function(){return xe.remove(this,"all"),"string"==typeof this.selector?delete $[this.selector]:(xe.remove(this,"all"),this.options.styleCursor&&(this._element.style.cursor=""),N.splice(N.indexOf(this.element()))),this.dropzone(!1),q.splice(q.indexOf(this),1),b}},b.isSet=function(e){return-1!==q.indexOfElement(e)},b.on=function(e,t){return-1!==ue.indexOf(e)&&(de[e]?-1===de[e].indexOf(t)&&de[e].push(t):de[e]=[t]),b},b.off=function(e,t){var n=de[e].indexOf(t);return-1!==n&&de[e].splice(n,1),b},b.simulate=function(t,n,i){var r,o,s={};if("resize"===t&&(t="resizexy"),!(t in ae))return b;if(i)for(r in i)i.hasOwnProperty(r)&&(s[r]=i[r]);else o=V._element instanceof _?n.getBoundingClientRect():o=n.getClientRects()[0],"drag"===t?(s.pageX=o.left+o.width/2,s.pageY=o.top+o.height/2):(s.pageX=o.right,s.pageY=o.bottom);return s.target=s.currentTarget=n,s.preventDefault=s.stopPropagation=e,d(s,t),b},b.enableDragging=function(e){return null!=e?(le.drag=e,b):le.drag},b.enableResizing=function(e){return null!=e?(le.resize=e,b):le.resize},b.enableGesturing=function(e){return null!=e?(le.gesture=e,b):le.gesture},b.eventTypes=ue,b.debug=function(){return{target:V,dragging:ie,resizing:oe,gesturing:ne,prevX:T,prevY:A,x0:C,y0:k,Interactable:E,IOptions:w,interactables:q,dropzones:L,pointerIsDown:Z,supportsTouch:J,defaultOptions:F,defaultActionChecker:E.prototype.getAction,dragMove:g,resizeMove:f,gestureMove:y,pointerUp:x,pointerDown:d,pointerHover:v,events:xe,globalEvents:de,log:function(){z.log("target         :  "+V),z.log("prevX, prevY   :  "+T,A),z.log("x0, y0         :  "+C,k),z.log("supportsTouch  :  "+J),z.log("pointerIsDown  :  "+Z),z.log("currentAction  :  "+b.currentAction())}}},b.margin=function(e){return"number"==typeof e?(Q=e,b):Q},b.styleCursor=function(e){return"boolean"==typeof e?(F.styleCursor=e,b):F.styleCursor},b.autoScroll=function(e){var t=F.autoScroll;return e instanceof Object?(F.autoScrollEnabled=!0,"number"==typeof e.margin&&(t.margin=e.margin),"number"==typeof e.distance&&(t.distance=e.distance),"number"==typeof e.interval&&(t.interval=e.interval),t.container=e.container instanceof Element?e.container:t.container,b):"boolean"==typeof e?(F.autoScrollEnabled=e,b):!!F.autoScrollEnabled&&t},b.snap=function(e){var t=F.snap;return e instanceof Object?(F.snapEnabled=!0,"string"==typeof e.mode&&(t.mode=e.mode),"number"==typeof e.range&&(t.range=e.range),e.anchors instanceof Array&&(t.anchors=e.anchors),e.grid instanceof Object&&(t.grid=e.grid),e.gridOffset instanceof Object&&(t.gridOffset=e.gridOffset),b):"boolean"==typeof e?(F.snapEnabled=e,b):{enabled:F.snapEnabled,mode:t.mode,grid:t.grid,gridOffset:t.gridOffset,anchors:t.anchors,paths:t.paths,range:t.range,locked:H.locked,x:H.x,y:H.y,realX:H.realX,realY:H.realY,dx:H.dx,dy:H.dy}},b.supportsTouch=function(){return J},b.currentAction=function(){return(ie?"drag":oe&&"resize")||ne&&"gesture"||null},b.stop=function(e){if(ie||oe||ne){W.stop(),G=[],V.options.styleCursor&&(O.documentElement.style.cursor=""),V.selector||(V=null),B=U=null;for(var t=0;t<K.length;t++)K._elements=[];e&&"function"==typeof e.preventDefault&&e.preventDefault()}return Z=H.locked=ie=oe=ne=!1,ee=!0,ce=null,b},b.dynamicDrop=function(e){return"boolean"==typeof e?(ie&&re!==e&&!e&&s(L),re=e,b):re},b.deltaSource=function(e){return"page"===e||"client"===e?(F.deltaSource=e,this):F.deltaSource},xe.add(ye,"mousedown",u),xe.add(ye,"touchstart",u),xe.add(ye,"mousemove",p),xe.add(ye,"touchmove",p),xe.add(ye,"mouseover",(function(e){if(!(Z||ie||oe||ne)){var t=[],n=V&&V._element,i=e.target instanceof X?e.target.correspondingUseElement:e.target;for(var r in $)$.hasOwnProperty(r)&&$[r]&&i[ge](r)&&($[r]._element=i,t.push($[r]));var o=q.get(i);if(o&&h(o.getAction(e,o),o),!o||!h(o.getAction(e)))if(m(e,t))v(e,G=t),xe.addToElement(i,"mousemove",v);else if(V){var s=n.querySelectorAll("*");if(-1!==Array.prototype.indexOf.call(s,i)){for(var a=0;a<G.length;a++)G[a]._element=n;v(e,G),xe.addToElement(V._element,"mousemove",v)}else V=null,G=[]}}})),xe.add(ye,"mouseout",(function(e){var t=e.target instanceof X?e.target.correspondingUseElement:e.target;q.get(t)||xe.removeFromElement(t,v),V&&V.options.styleCursor&&!(ie||oe||ne)&&(O.documentElement.style.cursor="")})),xe.add(ye,"mouseup",x),xe.add(ye,"touchend",x),xe.add(ye,"touchcancel",x),xe.add(fe,"blur",x),window.parent!==window)try{xe.add(ve,"mouseup",x),xe.add(ve,"touchend",x),xe.add(ve,"touchcancel",x),xe.add(me,"blur",x)}catch(e){b.windowParentError=e}return xe.add(ye,"selectstart",(function(e){(ie||oe||ne)&&e.preventDefault()})),ge in Element.prototype&&"function"==typeof Element.prototype[ge]||(Element.prototype[ge]=S=function(e,t){t=t||this.parentNode.querySelectorAll(e),count=t.length;for(var n=0;count>n;n++)if(t[n]===this)return!0;return!1}),b}();